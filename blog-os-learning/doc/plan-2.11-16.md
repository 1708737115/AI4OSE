# AI 辅助 OS 开发学习计划 (2.11 - 2.16)

> 以 AI 为思考伙伴的 OS 学习方法论

---

## 核心定位：AI 在 OS 开发中扮演的角色

| 角色 | 具体作用 | 我的使用方式 |
|------|---------|-------------|
| **代码讲解员** | 解释复杂代码逻辑、函数用途 | 粘贴代码片段，让 AI 分析调用关系 |
| **思考对话者** | 验证我的理解是否正确 | "我理解 XXX 是这样，对吗？" |
| **知识连接器** | 帮助建立概念之间的联系 | "A 和 B 有什么关系？" |
| **调试助手** | 分析报错、定位问题 | 粘贴错误信息，让 AI 给出可能原因 |
| **学习规划师** | 根据进度调整计划 | "我还有 X 天，学完 Y 章够吗？" |
| **知识扩展器** | 补充背景知识、相关概念 | "这个概念在计算机体系中属于哪部分？" |

---

## 我的 AI 辅助学习流程

### 整体思维链

```
遇到问题/新概念
      ↓
用我自己的话描述问题（强制思考）
      ↓
向 AI 提问（获取信息）
      ↓
追问验证（确认理解）
      ↓
动手实践（验证 AI 说法）
      ↓
记录总结（形成自己的知识）
      ↓
关联已知（与之前知识的联系）
```

---

## 各章节详细学习路径

### Ch3: 内存管理（预计 2 天）

#### 第一步：建立问题框架

**我先问自己**：
- 本章要解决什么问题？（内存管理）
- 我已经知道什么？（Ch2 批处理系统，一次只能运行一个程序）
- 还缺少什么？（如何高效利用内存、如何隔离不同程序）

**我的 AI 对话**：
```
"在 Ch2 批处理系统中，所有程序共享同一块物理内存。
到了 Ch3 要解决什么问题？为什么需要引入内存管理？"
```

#### 第二步：理解核心数据结构

**关键函数/结构**（待填充）：
| 名称 | 作用 | 我的理解 |
|------|------|---------|
| `FrameAllocator` | | |
| `PageTable` | | |
| `VPN` (Virtual Page Number) | | |
| `PTE` (Page Table Entry) | | |

**我的 AI 对话**：
```
"分析 ch3/src 目录下 allocator.rs 的 FrameAllocator 实现，
它是如何管理物理内存的？用了什么数据结构？"
```

#### 第三步：追踪调用链路

**我要做的事情**：
1. 找到入口函数（通常是 `main.rs` 或 `entry.asm`）
2. 追踪 `FrameAllocator::new()` 的调用
3. 追踪 `PageTable::new()` 的调用
4. 记录关键调用点

**我的 AI 对话**：
```
"帮我追踪 ch3 中内存初始化的调用链：
从 boot 结束后，开始内存管理初始化的完整流程是什么？
每一步调用了哪些函数？"
```

#### 第四步：理解执行流程

**绘制流程图**（模板）：

```
[启动]
   ↓
[内存探测] ──→ 获取物理内存大小
   ↓
[FrameAllocator::new()] ──→ 分配器初始化
   ↓
[PageTable::new()] ──→ 页表创建
   ↓
[映射建立] ──→ 内核代码映射
   ↓
[开启分页] ──→ sv39 启用
```

**我的 AI 对话**：
```
"用流程图描述 ch3 中从 boot 到开启分页的完整流程，
并在每个节点标注关键函数和数据结构"
```

#### 第五步：完成练习

**exercise 要求**：
1. [ ] 阅读 exercise.md，理解要求
2. [ ] 尝试自己完成
3. [ ] 遇到问题向 AI 求助
4. [ ] 完成后让 AI Code Review

**我的 AI 对话**：
```
"我完成了 Ch3 的 exercise，但不确定是否正确。
帮我 review 这段代码：[粘贴代码]
有什么问题？有没有更好的实现方式？"
```

---

### Ch4: 操作系统接口（预计 1.5 天）

#### 核心问题链

```
用户程序想打印 → 不能直接访问硬件
     ↓
需要系统调用 → 进入内核态
     ↓
内核处理请求 → 调用 SBI 输出
     ↓
返回用户态 → 继续执行
```

**我的 AI 对话**：
```
"Ch4 要实现用户态到内核态的切换。
什么是系统调用？用户程序如何触发系统调用？
在 RISC-V 上是如何实现的？"
```

#### 关键函数记录

| 函数名 | 功能 | 调用来源 |
|--------|------|---------|
| `syscall` | | |
| `sys_read`/`sys_write` | | |
| `user_return` | | |
| `switch_to_user` | | |

---

### Ch5: 进程管理（预计 1.5 天）

#### 核心概念理解

**我的理解**：
- 进程 = 正在运行的程序
- 需要 PCB (Process Control Block) 保存进程状态
- 需要进程切换（保存/恢复上下文）

**我的 AI 对话**：
```
"进程和程序有什么区别？
PCB 包含哪些信息？
进程切换时，CPU 寄存器如何保存和恢复？"
```

#### 流程追踪

```
[进程创建] → fork/exec
     ↓
[进程调度] → 选择下一个运行进程
     ↓
[上下文切换] → 保存当前，恢复目标
     ↓
[进程退出] → 资源回收
```

---

### Ch6: 文件系统（预计 0.5-1 天）

#### 核心问题

```
文件如何存储在磁盘上？
如何找到文件对应的数据块？
如何管理空闲空间？
```

**我的 AI 对话**：
```
"Fat32 文件系统是如何组织的？
文件分配表的作用是什么？
目录项和 inode 是什么关系？"
```

---

### Ch8: 多核支持（预计 0.5 天）

#### 核心问题

```
多核如何同时启动？
核间如何通信？
如何保证数据一致性？
```

**我的 AI 对话**：
```
"SMP (对称多处理) 是什么？
RISC-V 多核启动流程是怎样的？
为什么需要原子操作？"
```

---

## 我的 AI 对话模板库

### 场景 1：开始新章节

```
"我要学习 rCore-Tutorial ChX，请帮我：
1. 概述本章要解决的核心问题
2. 列出本章涉及的关键概念（3-5个）
3. 推荐的学习顺序是什么？"
```

### 场景 2：理解数据结构和函数

```
"分析 [文件名] 中的 [结构体/函数名]：
1. 它有什么作用？
2. 关键字段/步骤是什么？
3. 被谁调用？调用谁？
4. 为什么这样设计？"
```

### 场景 3：追踪调用链

```
"我想了解 [功能] 的实现：
从用户调用到内核处理，完整的调用链是什么？
经过哪些文件？哪些函数？
每一步的作用是什么？"
```

### 场景 4：验证我的理解

```
"我的理解是：[用自己话描述]
请判断是否正确，如果有误请指出哪里理解错了。
可以用更简单的方式解释吗？"
```

### 场景 5：遇到报错

```
"编译/运行报错：[粘贴完整错误信息]
这是什么错误？
可能的原因有哪些？
如何修复？"
```

### 场景 6：对比学习

```
"[某个概念/实现] 和 [另一个概念/实现] 有什么异同？
分别在什么场景下使用？
各自的优缺点是什么？"
```

### 场景 7：知识关联

```
"ChX 的 [概念] 和 ChY 的 [概念] 有什么关系？
它们是如何配合工作的？
可以举一个具体的例子吗？"
```

### 场景 8：完成练习后

```
"我完成了 ChX 的 exercise，请帮我：
1. 检查代码是否有问题
2. 是否有更好的实现方式
3. 我的实现和参考实现有什么差异？"
```

---

## 我的输出物规范

### 每章节必须包含

#### 1. AI 对话记录（存放在 `work/chX-ai-dialogue.md`）

```markdown
# Ch3 AI 对话记录

## 对话 1：理解内存管理问题
**问题**：...
**AI 回答**：...
**我的收获**：...

## 对话 2：分析 FrameAllocator
**问题**：...
**AI 回答**：...
**我的收获**：...
```

#### 2. 流程图/调用链（存放在 `blog/ch03-xx.md`）

```markdown
## 内存初始化流程

```
[启动] → [内存探测] → [分配器初始化] → [页表创建] → [开启分页]
```

## 关键函数
- `FrameAllocator::new()`：...
- `PageTable::new()`：...
```

#### 3. 关键函数记录表

| 函数/结构 | 位置 | 作用 | 调用关系 |
|----------|------|------|---------|
| xxx | xxx | xxx | 被 xxx 调用 / 调用 xxx |

---

## 时间规划与检查点

### 2月11日（周一）
- [ ] 完成 Ch3 预处理（浏览 README，列出问题）
- [ ] 与 AI 对话：理解 Ch3 核心问题
- [ ] 开始阅读代码

### 2月12日（周二）
- [ ] 完成 Ch3 代码精读
- [ ] 完成 Ch3 调用链梳理
- [ ] 与 AI 对话：深入理解内存管理实现

### 2月13日（周三）
- [ ] 完成 Ch3 练习
- [ ] AI Code Review
- [ ] 写 Ch3 博客

### 2月14日（周四）
- [ ] 完成 Ch4 学习
- [ ] 理解系统调用机制

### 2月15日（周五）
- [ ] 完成 Ch5 学习
- [ ] 理解进程管理

### 2月16日（周六）
- [ ] 完成 Ch6 学习
- [ ] 完成/开始 Ch8 学习
- [ ] 整体复盘

---


## 学习原则

1. **先思考，后提问**：用自己的话描述问题，确保真正理解问题
2. **追问验证**：AI 说的不一定对，用代码验证
3. **关联已知**：新知识要跟已有知识建立联系
4. **及时记录**：灵感/困惑点立即记录
5. **定期复盘**：每天回顾，形成知识网络
6. **渐进式独立**：从完全依赖 → 引导式 → 验证式 → 独立式
